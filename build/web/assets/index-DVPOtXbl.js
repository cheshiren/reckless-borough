(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Ce,E,gn,te,Lt,mn,pn,vn,lt,Qe,Ze,bn,we={},yn=[],go=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,$e=Array.isArray;function U(e,t){for(var n in t)e[n]=t[n];return e}function ut(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Se(e,t,n){var o,a,i,r={};for(i in t)i=="key"?o=t[i]:i=="ref"?a=t[i]:r[i]=t[i];if(arguments.length>2&&(r.children=arguments.length>3?Ce.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)r[i]==null&&(r[i]=e.defaultProps[i]);return ye(e,r,o,a,null)}function ye(e,t,n,o,a){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++gn,__i:-1,__u:0};return a==null&&E.vnode!=null&&E.vnode(i),i}function $(e){return e.children}function ke(e,t){this.props=e,this.context=t}function _e(e,t){if(t==null)return e.__?_e(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?_e(e):null}function kn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return kn(e)}}function et(e){(!e.__d&&(e.__d=!0)&&te.push(e)&&!Ie.__r++||Lt!=E.debounceRendering)&&((Lt=E.debounceRendering)||mn)(Ie)}function Ie(){for(var e,t,n,o,a,i,r,c=1;te.length;)te.length>c&&te.sort(pn),e=te.shift(),c=te.length,e.__d&&(n=void 0,a=(o=(t=e).__v).__e,i=[],r=[],t.__P&&((n=U({},o)).__v=o.__v+1,E.vnode&&E.vnode(n),dt(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[a]:null,i,a??_e(o),!!(32&o.__u),r),n.__v=o.__v,n.__.__k[n.__i]=n,xn(i,n,r),n.__e!=a&&kn(n)));Ie.__r=0}function wn(e,t,n,o,a,i,r,c,d,u,_){var l,g,h,f,m,b,v=o&&o.__k||yn,x=t.length;for(d=mo(n,t,v,d,x),l=0;l<x;l++)(h=n.__k[l])!=null&&(g=h.__i==-1?we:v[h.__i]||we,h.__i=l,b=dt(e,h,g,a,i,r,c,d,u,_),f=h.__e,h.ref&&g.ref!=h.ref&&(g.ref&&_t(g.ref,null,h),_.push(h.ref,h.__c||f,h)),m==null&&f!=null&&(m=f),4&h.__u||g.__k===h.__k?d=Sn(h,d,e):typeof h.type=="function"&&b!==void 0?d=b:f&&(d=f.nextSibling),h.__u&=-7);return n.__e=m,d}function mo(e,t,n,o,a){var i,r,c,d,u,_=n.length,l=_,g=0;for(e.__k=new Array(a),i=0;i<a;i++)(r=t[i])!=null&&typeof r!="boolean"&&typeof r!="function"?(d=i+g,(r=e.__k[i]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?ye(null,r,null,null,null):$e(r)?ye($,{children:r},null,null,null):r.constructor==null&&r.__b>0?ye(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,c=null,(u=r.__i=po(r,n,d,l))!=-1&&(l--,(c=n[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(a>_?g--:a<_&&g++),typeof r.type!="function"&&(r.__u|=4)):u!=d&&(u==d-1?g--:u==d+1?g++:(u>d?g--:g++,r.__u|=4))):e.__k[i]=null;if(l)for(i=0;i<_;i++)(c=n[i])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=_e(c)),$n(c,c));return o}function Sn(e,t,n){var o,a;if(typeof e.type=="function"){for(o=e.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=e,t=Sn(o[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=_e(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function tt(e,t){return t=t||[],e==null||typeof e=="boolean"||($e(e)?e.some(function(n){tt(n,t)}):t.push(e)),t}function po(e,t,n,o){var a,i,r=e.key,c=e.type,d=t[n];if(d===null&&e.key==null||d&&r==d.key&&c==d.type&&(2&d.__u)==0)return n;if(o>(d!=null&&(2&d.__u)==0?1:0))for(a=n-1,i=n+1;a>=0||i<t.length;){if(a>=0){if((d=t[a])&&(2&d.__u)==0&&r==d.key&&c==d.type)return a;a--}if(i<t.length){if((d=t[i])&&(2&d.__u)==0&&r==d.key&&c==d.type)return i;i++}}return-1}function At(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||go.test(t)?n:n+"px"}function Te(e,t,n,o,a){var i;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||At(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||At(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(vn,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=lt,e.addEventListener(t,i?Ze:Qe,i)):e.removeEventListener(t,i?Ze:Qe,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Tt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=lt++;else if(t.t<n.u)return;return n(E.event?E.event(t):t)}}}function dt(e,t,n,o,a,i,r,c,d,u){var _,l,g,h,f,m,b,v,x,y,k,M,O,B,se,W,Q,D=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),i=[c=t.__e=n.__e]),(_=E.__b)&&_(t);e:if(typeof D=="function")try{if(v=t.props,x="prototype"in D&&D.prototype.render,y=(_=D.contextType)&&o[_.__c],k=_?y?y.props.value:_.__:o,n.__c?b=(l=t.__c=n.__c).__=l.__E:(x?t.__c=l=new D(v,k):(t.__c=l=new ke(v,k),l.constructor=D,l.render=bo),y&&y.sub(l),l.props=v,l.state||(l.state={}),l.context=k,l.__n=o,g=l.__d=!0,l.__h=[],l._sb=[]),x&&l.__s==null&&(l.__s=l.state),x&&D.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=U({},l.__s)),U(l.__s,D.getDerivedStateFromProps(v,l.__s))),h=l.props,f=l.state,l.__v=t,g)x&&D.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),x&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(x&&D.getDerivedStateFromProps==null&&v!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,k),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,k)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(l.props=v,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(q){q&&(q.__=t)}),M=0;M<l._sb.length;M++)l.__h.push(l._sb[M]);l._sb=[],l.__h.length&&r.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,k),x&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,f,m)})}if(l.context=k,l.props=v,l.__P=e,l.__e=!1,O=E.__r,B=0,x){for(l.state=l.__s,l.__d=!1,O&&O(t),_=l.render(l.props,l.state,l.context),se=0;se<l._sb.length;se++)l.__h.push(l._sb[se]);l._sb=[]}else do l.__d=!1,O&&O(t),_=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++B<25);l.state=l.__s,l.getChildContext!=null&&(o=U(U({},o),l.getChildContext())),x&&!g&&l.getSnapshotBeforeUpdate!=null&&(m=l.getSnapshotBeforeUpdate(h,f)),W=_,_!=null&&_.type===$&&_.key==null&&(W=Cn(_.props.children)),c=wn(e,$e(W)?W:[W],t,n,o,a,i,r,c,d,u),l.base=t.__e,t.__u&=-161,l.__h.length&&r.push(l),b&&(l.__E=l.__=null)}catch(q){if(t.__v=null,d||i!=null)if(q.then){for(t.__u|=d?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else for(Q=i.length;Q--;)ut(i[Q]);else t.__e=n.__e,t.__k=n.__k;E.__e(q,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=vo(n.__e,t,n,o,a,i,r,d,u);return(_=E.diffed)&&_(t),128&t.__u?void 0:c}function xn(e,t,n){for(var o=0;o<n.length;o++)_t(n[o],n[++o],n[++o]);E.__c&&E.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){E.__e(i,a.__v)}})}function Cn(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:$e(e)?e.map(Cn):U({},e)}function vo(e,t,n,o,a,i,r,c,d){var u,_,l,g,h,f,m,b=n.props,v=t.props,x=t.type;if(x=="svg"?a="http://www.w3.org/2000/svg":x=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((h=i[u])&&"setAttribute"in h==!!x&&(x?h.localName==x:h.nodeType==3)){e=h,i[u]=null;break}}if(e==null){if(x==null)return document.createTextNode(v);e=document.createElementNS(a,x,v.is&&v),c&&(E.__m&&E.__m(t,i),c=!1),i=null}if(x==null)b===v||c&&e.data==v||(e.data=v);else{if(i=i&&Ce.call(e.childNodes),b=n.props||we,!c&&i!=null)for(b={},u=0;u<e.attributes.length;u++)b[(h=e.attributes[u]).name]=h.value;for(u in b)if(h=b[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=h;else if(!(u in v)){if(u=="value"&&"defaultValue"in v||u=="checked"&&"defaultChecked"in v)continue;Te(e,u,null,h,a)}}for(u in v)h=v[u],u=="children"?g=h:u=="dangerouslySetInnerHTML"?_=h:u=="value"?f=h:u=="checked"?m=h:c&&typeof h!="function"||b[u]===h||Te(e,u,h,b[u],a);if(_)c||l&&(_.__html==l.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(l&&(e.innerHTML=""),wn(t.type=="template"?e.content:e,$e(g)?g:[g],t,n,o,x=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,r,i?i[0]:n.__k&&_e(n,0),c,d),i!=null)for(u=i.length;u--;)ut(i[u]);c||(u="value",x=="progress"&&f==null?e.removeAttribute("value"):f!=null&&(f!==e[u]||x=="progress"&&!f||x=="option"&&f!=b[u])&&Te(e,u,f,b[u],a),u="checked",m!=null&&m!=e[u]&&Te(e,u,m,b[u],a))}return e}function _t(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(a){E.__e(a,n)}}function $n(e,t,n){var o,a;if(E.unmount&&E.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||_t(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){E.__e(i,t)}o.base=o.__P=null}if(o=e.__k)for(a=0;a<o.length;a++)o[a]&&$n(o[a],t,n||typeof e.type!="function");n||ut(e.__e),e.__c=e.__=e.__e=void 0}function bo(e,t,n){return this.constructor(e,n)}function yo(e,t,n){var o,a,i,r;t==document&&(t=document.documentElement),E.__&&E.__(e,t),a=(o=!1)?null:t.__k,i=[],r=[],dt(t,e=t.__k=Se($,null,[e]),a||we,we,t.namespaceURI,a?null:t.firstChild?Ce.call(t.childNodes):null,i,a?a.__e:t.firstChild,o,r),xn(i,e,r)}function ko(e,t,n){var o,a,i,r,c=U({},e.props);for(i in e.type&&e.type.defaultProps&&(r=e.type.defaultProps),t)i=="key"?o=t[i]:i=="ref"?a=t[i]:c[i]=t[i]==null&&r!=null?r[i]:t[i];return arguments.length>2&&(c.children=arguments.length>3?Ce.call(arguments,2):n),ye(e.type,c,o||e.key,a||e.ref,null)}function He(e){function t(n){var o,a;return this.getChildContext||(o=new Set,(a={})[t.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&o.forEach(function(r){r.__e=!0,et(r)})},this.sub=function(i){o.add(i);var r=i.componentWillUnmount;i.componentWillUnmount=function(){o&&o.delete(i),r&&r.call(i)}}),n.children}return t.__c="__cC"+bn++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}Ce=yn.slice,E={__e:function(e,t,n,o){for(var a,i,r;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),r=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,o||{}),r=a.__d),r)return a.__E=a}catch(c){e=c}throw e}},gn=0,ke.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof e=="function"&&(e=e(U({},n),this.props)),e&&U(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),et(this))},ke.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),et(this))},ke.prototype.render=$,te=[],mn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pn=function(e,t){return e.__v.__b-t.__v.__b},Ie.__r=0,vn=/(PointerCapture)$|Capture$/i,lt=0,Qe=Tt(!1),Ze=Tt(!0),bn=0;var wo=0;function s(e,t,n,o,a,i){t||(t={});var r,c,d=t;if("ref"in d)for(c in d={},t)c=="ref"?r=t[c]:d[c]=t[c];var u={type:e,props:d,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--wo,__i:-1,__u:0,__source:a,__self:i};if(typeof e=="function"&&(r=e.defaultProps))for(c in r)d[c]===void 0&&(d[c]=r[c]);return E.vnode&&E.vnode(u),u}const So="modulepreload",xo=function(e,t){return new URL(e,t).href},Pt={},nt=function(t,n,o){let a=Promise.resolve();if(n&&n.length>0){const r=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.allSettled(n.map(u=>{if(u=xo(u,o),u in Pt)return;Pt[u]=!0;const _=u.endsWith(".css"),l=_?'[rel="stylesheet"]':"";if(!!o)for(let f=r.length-1;f>=0;f--){const m=r[f];if(m.href===u&&(!_||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${l}`))return;const h=document.createElement("link");if(h.rel=_?"stylesheet":So,_||(h.as="script"),h.crossOrigin="",h.href=u,d&&h.setAttribute("nonce",d),document.head.appendChild(h),_)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return a.then(r=>{for(const c of r||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};var fe,L,ze,Ot,xe=0,En=[],j=E,jt=j.__b,Mt=j.__r,It=j.diffed,Dt=j.__c,Vt=j.unmount,Ft=j.__;function Re(e,t){j.__h&&j.__h(L,e,xe||t),xe=0;var n=L.__H||(L.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function w(e){return xe=1,Co(An,e)}function Co(e,t,n){var o=Re(fe++,2);if(o.t=e,!o.__c&&(o.__=[An(void 0,t),function(c){var d=o.__N?o.__N[0]:o.__[0],u=o.t(d,c);d!==u&&(o.__N=[u,o.__[1]],o.__c.setState({}))}],o.__c=L,!L.__f)){var a=function(c,d,u){if(!o.__c.__H)return!0;var _=o.__c.__H.__.filter(function(g){return!!g.__c});if(_.every(function(g){return!g.__N}))return!i||i.call(this,c,d,u);var l=o.__c.props!==c;return _.forEach(function(g){if(g.__N){var h=g.__[0];g.__=g.__N,g.__N=void 0,h!==g.__[0]&&(l=!0)}}),i&&i.call(this,c,d,u)||l};L.__f=!0;var i=L.shouldComponentUpdate,r=L.componentWillUpdate;L.componentWillUpdate=function(c,d,u){if(this.__e){var _=i;i=void 0,a(c,d,u),i=_}r&&r.call(this,c,d,u)},L.shouldComponentUpdate=a}return o.__N||o.__}function P(e,t){var n=Re(fe++,3);!j.__s&&Ln(n.__H,t)&&(n.__=e,n.u=t,L.__H.__h.push(n))}function $o(e){return xe=5,ft(function(){return{current:e}},[])}function ft(e,t){var n=Re(fe++,7);return Ln(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function p(e,t){return xe=8,ft(function(){return e},t)}function Ee(e){var t=L.context[e.__c],n=Re(fe++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(L)),t.props.value):e.__}function Eo(){for(var e;e=En.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Me),e.__H.__h.forEach(ot),e.__H.__h=[]}catch(t){e.__H.__h=[],j.__e(t,e.__v)}}j.__b=function(e){L=null,jt&&jt(e)},j.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ft&&Ft(e,t)},j.__r=function(e){Mt&&Mt(e),fe=0;var t=(L=e.__c).__H;t&&(ze===L?(t.__h=[],L.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Me),t.__h.forEach(ot),t.__h=[],fe=0)),ze=L},j.diffed=function(e){It&&It(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(En.push(t)!==1&&Ot===j.requestAnimationFrame||((Ot=j.requestAnimationFrame)||Lo)(Eo)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ze=L=null},j.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Me),n.__h=n.__h.filter(function(o){return!o.__||ot(o)})}catch(o){t.some(function(a){a.__h&&(a.__h=[])}),t=[],j.__e(o,n.__v)}}),Dt&&Dt(e,t)},j.unmount=function(e){Vt&&Vt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Me(o)}catch(a){t=a}}),n.__H=void 0,t&&j.__e(t,n.__v))};var Ht=typeof requestAnimationFrame=="function";function Lo(e){var t,n=function(){clearTimeout(o),Ht&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Ht&&(t=requestAnimationFrame(n))}function Me(e){var t=L,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),L=t}function ot(e){var t=L;e.__c=e.__(),L=t}function Ln(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function An(e,t){return typeof t=="function"?t(e):t}var Y,st=function(e,t){return st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},st(e,t)},Rt=function(e){function t(n,o){var a=e.call(this,"Translation failed")||this;return a.id=n,a.language=o,a}return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function a(){this.constructor=n}st(n,o),n.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}(t,e),t.is=function(n){return n instanceof t},t}(Error),Ao=function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e}();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(Y||(Y={}));var To=["{","}",","],Po=function(){function e(t){this.input=new Ao(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile(function(o){return!function(a){return To.includes(a)}(o)}).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:Y.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:Y.Text,value:this.readWhile(function(t){return t!=="{"&&t!=="}"})}},e.prototype.readVariableType=function(){var t=this.readWhile(function(n){return n!==","}).trim();return t==="plural"?Y.Plural:t==="select"?Y.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e}();function Oo(e,t,n){for(var o=new Po(t),a=[],i=function(r){var c=r.options,d=r.type,u=r.value;if(d!==Y.Variable)if(c)if(d!==Y.Select)try{a.concat(c[new Intl.PluralRules(e).select(n[u])].map(i))}catch{a.concat(c.other.map(i))}else a.concat((c[n[u]]||c.other).map(i));else a.push(u);else a.push(n[u])};!o.input.done;)i(o.next());return a}var Tn=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(a,i){return new Intl.DateTimeFormat(n.language,i).format(a)},this.formatNumber=function(a,i){return new Intl.NumberFormat(n.language,i).format(a)},this.translate=function(a,i){i===void 0&&(i={});var r=n.getMessageById(a,i.defaultMessage);if(typeof r=="string")try{return Oo(n.language,r,i).join("")}catch{n.onError(new Rt(a,n.language))}return r+""},this.getMessageById=function(a,i){if(!n.memo[a]){var r=n.messages[a];r===void 0&&(r=a.split(".").reduce(function(c,d){return c?c[d]:void 0},n.messages)),typeof r!="string"&&(n.onError(new Rt(a,n.language)),r=i||a),n.memo[a]=r}return n.memo[a]};var o=t.find(function(a){return a.language===e});this.language=e,this.messages=o?o.messages:{}};function jo(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}var ht=He({language:"",locales:[],setLanguage:function(){},translator:new Tn}),Mo=function(e){var t=e.children,n=e.language,o=e.locales,a=e.onError,i=w(n);P(function(){i[1](n)},[n]);var r=new Tn(i[0],o);return a&&(r.onError=a),Se(ht.Provider,{value:{language:i[0],locales:o,setLanguage:i[1],translator:r}},t)};function I(e){var t=Ee(ht);return t.translator}var C=function(e){var t=e.html,n=e.id,o=e.tagName,a=o===void 0?"span":o,i=jo(e,["children","html","id","tagName"]),r=Ee(ht).translator.translate(n,i);return t?Se(a,{dangerouslySetInnerHTML:{__html:r}}):Se($,null,r)};const gt=He(null),Pn=He(!0),Io="light",Do="Iosevka Term Slab",Vo="ru",Fo="ru-RU",Ho={path:"game"},ne={theme:Io,font:Do,language:Vo,locale:Fo,game:Ho},On="2.2.0";var _n,fn,hn;const jn=(_n=ne.game)!=null&&_n.zip?(fn=ne.game)==null?void 0:fn.zip:(hn=ne.game)==null?void 0:hn.path,Mn="reckless-borough.ink.json",Ro=["Atrament://",window.location.host,window.location.pathname,jn,"/",Mn].join(""),No=ne.language,In=ne.locale,Dn=ne.theme,Vn=ne.font,mt=100,Ne=10,at=mt-Ne*3,it=mt+Ne*5,ie="ERROR",H="OVERLAY",le="TOOLBAR",Fn="__DEFAULT__",Bo=["title","author","theme","font","observe","persist","sessions","autosave","saves","load_from_checkpoints","continue_maximally","single_scene","scenes_align","choices","hypertext","toolbar","about","cover","background","debug"];function zo(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}function Go(e){const t=e.state.get().metadata.theme||Dn;e.settings.get("theme")||e.settings.set("theme",t)}function Uo(e){const t=e.state.get().metadata.font||Vn;e.settings.get("font")||e.settings.set("font",t)}const Hn="dark",Rn={"bg-color":"#0D2B45","fg-color":"#FFECD6","shade-color":"rgba(255, 255, 255, 0.1)","font-color":"#FFECD6","accent-bg-color":"#EEEEEE","accent-fg-color":"#D08159","border-radius":"none","border-radius-inline":"none","h1-font-weight":"normal"},Wo={name:Hn,theme:Rn},Ko=Object.freeze(Object.defineProperty({__proto__:null,default:Wo,name:Hn,theme:Rn},Symbol.toStringTag,{value:"Module"})),Nn="light",Bn={"bg-color":"#FFECD6","fg-color":"#0D2B45","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#0D2B45","accent-bg-color":"#FCFCFC","accent-fg-color":"#D08159","border-radius":"none","border-radius-inline":"none","h1-font-weight":"bold"},qo={name:Nn,theme:Bn},Yo=Object.freeze(Object.defineProperty({__proto__:null,default:qo,name:Nn,theme:Bn},Symbol.toStringTag,{value:"Module"})),ue={},de={},Xo=Object.assign({"../resources/themes/dark.json":Ko,"../resources/themes/light.json":Yo});Object.values(Xo).map(({default:e})=>{e&&(de[e.name]=e.theme)});["light","sepia","dark"].forEach(e=>{de[e]&&(ue[e]=de[e],delete de[e])});Object.keys(de).sort().forEach(e=>ue[e]=de[e]);function Jo(e){!e||!ue[e]||Object.entries(ue[e]||ue[Dn]).forEach(([t,n])=>{document.documentElement.style.setProperty(`--${t}`,n)})}const zn='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Qo={Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", ${zn}`};let he=Qo;(async()=>{{const e={},t=Object.assign({"../resources/fonts/IosevkaTermSlab/index.js":()=>nt(()=>import("./index-V7hy53U2.js"),[],import.meta.url)});await Promise.all(Object.values(t).map(n=>n().then(o=>{const a=o.default;a.name&&(e[a.name]=`${a.name}, ${a.fallback||"serif"}, ${zn}`)}))),Object.keys(e).sort().forEach(n=>he[n]=e[n])}})();function Zo(e){document.documentElement.style.setProperty("--font-game",he[e]||he[Vn])}function es(e){e.settings.defineHandler("theme",(t,n)=>{Jo(n)}),e.settings.defineHandler("font",(t,n)=>{Zo(n)}),e.settings.defineHandler("fontSize",(t,n)=>{document.documentElement.style.setProperty("--game-font-size",`${n}%`)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{e.interfaces.platform.setFullscreen(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function ts(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got ${typeof e}`);if(e.length===0)return[];const t=JSON.parse(JSON.stringify(e));for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}function ns(e){var o,a;const t=(o=e.tags)==null?void 0:o.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game","background",t));const n=(a=e.tags)==null?void 0:a.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game","background_page",n))}function os(e){var t;(t=e.tags)!=null&&t.SHUFFLE_CHOICES&&(e.choices=ts(e.choices))}function ss(e){[ns,os].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function as(e,t){const n=()=>{let a;try{a=e.ink.evaluateFunction(t,[],!0),e.state.setKey(le,a.output)}catch(i){e.ink.story().onError(i.toString())}},o=()=>setTimeout(n,0);e.on("game/continueStory",o),e.on("ink/evaluateFunction",a=>{a.function!==t&&o()}),n()}function is(e){e.ink.onError(n=>e.state.setKey(ie,n)),e.state.setKey(H,{current:null,content:"",title:null});const t=e.state.get().metadata;t.toolbar?as(e,t.toolbar):t.title?e.state.setKey(le,t.title):e.state.setKey(le,Fn)}function rs(e){const t=e.ink.story().state.previousPathString;e.state.setSubkey("game","$story_path",t)}async function cs(e,t){e.on("*",(o,a)=>console.log(`%c Atrament > ${o} `,"color: #111111; background-color: #7FDBFF;",a)),es(e),await e.init(t,{applicationID:Ro,settings:{fullscreen:!1,animation:!0,mute:!1,volume:50}}),e.on("game/start",()=>is(e)),e.on("game/continueStory",()=>rs(e)),await e.game.init(jn,Mn),await e.game.initInkStory(),Go(e),Uo(e),ss(e),zo(e);const n=e.state.get().metadata;n.title&&e.interfaces.platform.setTitle(n.title)}const ls=[{language:"en",messages:{yes:"Yes",no:"No",cancel:"Cancel",back:"Go back","default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.loadgame":"Load game","main.savegame":"Save game","main.continue":"Continue","main.emptyslot":"Empty slot","main.continue-session":"Continue game {session}","main.autosave":"Autosave: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"New save","main.delete-session":"Delete this session?","main.delete-save":"Delete this saved game?","main.confirm-load":"Load this game?","main.confirm-save":"Overwrite this save?","main.settings":"Settings","main.about":"About","main.exit":"Exit","game.end":"The end","game.save-and-quit":"Save game and quit","game.quit":"Quit game","game.click-to-continue":"Click to continue","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz.",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink file","debug.info.story-seed":"Story seed","debug.info.current-turn-index":"Current turn index","debug.info.path":"Path","debug.global-tags":"Global tags","debug.unknown-tag":"Unknown tag","debug.variables":"Variables","debug.variables.filter-by-name":"Filter by name","debug.variables.name":"Name","debug.variables.value":"Value","debug.variables.cancel":"Cancel","debug.variables.save":"Save","debug.visits":"Visits","debug.go-to-path":"Go to path","debug.functions":"Functions","debug.functions.arguments":"Arguments","debug.functions.arguments_placeholder":'JSON-formatted agruments, i.e. ["arg1", 5]',"debug.functions.run-function":"Run function","debug.functions.returned-value":"Returned value","debug.functions.output":"Output","about.components":"Components and libraries","about.iftf_support":"Made with the support of the {iftf}"}},{language:"ua",messages:{yes:"Так",no:"Ні",cancel:"Скасувати",back:"Назад","default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.loadgame":"Завантажити гру","main.savegame":"Зберегти гру","main.continue":"Продовжити","main.emptyslot":"Порожній слот","main.continue-session":"Продовжити гру {session}","main.autosave":"Автозбереження: {date}","main.checkpoint":"Контрольна точка","main.checkpoint-named":"Контрольна точка: {name}","main.new-save":"Нове збереження","main.delete-session":"Видалити сесію?","main.delete-save":"Видалити збережену гру?","main.confirm-load":"Завантажити цю гру?","main.confirm-save":"Перезаписати це збереження?","main.settings":"Налаштування","main.about":"Про гру","main.exit":"Вихід","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","game.quit":"Вийти з гри","game.click-to-continue":"Натисни, щоб продовжити","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб.",debug:"Налагодження","debug.info":"Інформація","debug.info.ink-file":"Ink-скрипт","debug.info.story-seed":"RNG-сід історії","debug.info.current-turn-index":"Індекс поточного ходу","debug.info.path":"Поточний шлях","debug.global-tags":"Глобальні теги","debug.unknown-tag":"Невідомий тег","debug.variables":"Змінні","debug.variables.filter-by-name":"Фільтр за ім'ям","debug.variables.name":"Ім'я","debug.variables.value":"Значення","debug.variables.cancel":"Скасувати","debug.variables.save":"Зберегти","debug.visits":"Візити","debug.go-to-path":"Перейти до","debug.functions":"Функції","debug.functions.arguments":"Аргументи","debug.functions.arguments_placeholder":'Аргументи у JSON-форматі, наприклад: ["arg1", 5]',"debug.functions.run-function":"Виконати функцію","debug.functions.returned-value":"Повернене значення","debug.functions.output":"Вивід","about.components":"Компоненти та бібліотеки","about.iftf_support":"Зроблено за підтримки фонду {iftf}"}},{language:"ru",messages:{yes:"Да",no:"Нет",cancel:"Отмена",back:"Назад","default.title":"Atrament UI","default.author":"Тестовое приложение","main.menu":"Главное меню","main.newgame":"Новая игра","main.loadgame":"Загрузить игру","main.savegame":"Сохранить игру","main.continue":"Продолжить","main.emptyslot":"Пустая ячейка","main.continue-session":"Продолжить игру {session}","main.autosave":"Автосохранение: {date}","main.checkpoint":"Контрольная точка","main.checkpoint-named":"Контрольная точка: {name}","main.new-save":"Новое сохранение","main.delete-session":"Удалить эту сессию?","main.delete-save":"Удалить эту сохранённую игру?","main.confirm-load":"Загрузить эту игру?","main.confirm-save":"Перезаписать это сохранение?","main.settings":"Настройки","main.about":"Об игре","main.exit":"Выйти","game.end":"Конец","game.save-and-quit":"Сохранить игру и выйти","game.quit":"Выйти из игры","game.click-to-continue":"Кликнуть, чтобы продолжить","settings.fullscreen":"На весь экран","settings.animations":"Анимации","settings.sound":"Звук","settings.appearance":"Внешний вид","themes.light":"Светлая","themes.sepia":"Сепия","themes.dark":"Тёмная","font.sampleText":"Широкая электрификация южных губерний даст мощный толчок подъёму сельского хозяйства.",debug:"Отладка","debug.info":"Информация","debug.info.ink-file":"Ink-скрипт","debug.info.story-seed":"Seed истории","debug.info.current-turn-index":"Индекс текущего хода","debug.info.path":"Текущий путь","debug.global-tags":"Глобальные теги","debug.unknown-tag":"Неизвестный тег","debug.variables":"Переменные","debug.variables.filter-by-name":"Фильтр по имени","debug.variables.name":"Имя","debug.variables.value":"Значение","debug.variables.cancel":"Отмена","debug.variables.save":"Сохранить","debug.visits":"Посещения","debug.go-to-path":"Перейти к","debug.functions":"Функции","debug.functions.arguments":"Аргументы","debug.functions.arguments_placeholder":'Аргументы в формате JSON, например: ["arg1", 5]',"debug.functions.run-function":"Запустить функцию","debug.functions.returned-value":"Возвращённое значение","debug.functions.output":"Вывод","about.components":"Компоненты и библиотеки","about.iftf_support":"Создано при поддержке {iftf}"}}],us="_application_wrapper_6fi81_1",ds={application_wrapper:us};let Ge;function Gn(){window.innerHeight!==Ge&&(Ge=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${Ge-1}px`))}window.addEventListener("resize",Gn);const _s=({children:e})=>(P(Gn,[]),s("div",{class:[ds.application_wrapper,"atrament-ui-app"].join(" "),children:e})),fs="_error_modal_content_njm9y_1",hs="_error_message_njm9y_8",Nt={error_modal_content:fs,error_message:hs},gs="_container_modal_fhjmv_1",ms={container_modal:gs},Un=({children:e})=>s("div",{class:[ms.container_modal,"atrament-container-modal"].join(" "),children:e}),ps="_backdrop_rne3i_1",vs={backdrop:ps},Wn=({onClick:e})=>s("div",{class:[vs.backdrop,"atrament-backdrop"].join(" "),onClick:e}),bs="_modal_7txxf_1",ys={modal:bs},Kn=({children:e})=>s("div",{class:[ys.modal,"atrament-modal"].join(" "),children:e}),ks="_close_eyo4x_1",ws={close:ks},pt=({onClick:e})=>s("div",{class:ws.close,children:s("button",{onClick:e,title:"Close",children:"✕"})}),Ss="_block_5hv3c_1",xs="_block_start_5hv3c_6",Cs="_block_end_5hv3c_10",Ue={block:Ss,block_start:xs,block_end:Cs},K=({children:e,align:t=null})=>{const n=[Ue.block,t==="start"?Ue.block_start:"",t==="end"?Ue.block_end:"","atrament-block"].join(" ");return s("div",{class:n,children:e})},We=()=>{},qn=({close:e=We,message:t})=>s(Un,{children:[s(Wn,{onClick:We}),s(Kn,{children:s("div",{class:Nt.error_modal_content,children:[e!==We?s(pt,{onClick:e}):"",s(K,{children:s("p",{class:Nt.error_message,children:t})})]})})]}),$s="_container_4l08p_1",Es={container:$s},Le=({children:e,style:t={}})=>s("div",{style:t,class:[Es.container,"atrament-container"].join(" "),children:e}),Ls="_loading_ffxmc_1",As={loading:Ls},Ts="_container_flex_at0vo_1",Ps={container_flex:Ts},vt=({children:e})=>s("div",{class:[Ps.container_flex,"atrament-flex-container"].join(" "),children:e}),Os="_sk_cube_grid_fv0g6_1",js="_sk_cube1_fv0g6_17",Ms="_sk_cube2_fv0g6_18",Is="_sk_cube3_fv0g6_19",Ds="_sk_cube4_fv0g6_20",Vs="_sk_cube5_fv0g6_21",Fs="_sk_cube6_fv0g6_22",Hs="_sk_cube7_fv0g6_23",Rs="_sk_cube8_fv0g6_24",Ns="_sk_cube9_fv0g6_25",z={sk_cube_grid:Os,sk_cube1:js,sk_cube2:Ms,sk_cube3:Is,sk_cube4:Ds,sk_cube5:Vs,sk_cube6:Fs,sk_cube7:Hs,sk_cube8:Rs,sk_cube9:Ns},Bs=()=>s("div",{class:z.sk_cube_grid,children:[s("div",{class:z.sk_cube1}),s("div",{class:z.sk_cube2}),s("div",{class:z.sk_cube3}),s("div",{class:z.sk_cube4}),s("div",{class:z.sk_cube5}),s("div",{class:z.sk_cube6}),s("div",{class:z.sk_cube7}),s("div",{class:z.sk_cube8}),s("div",{class:z.sk_cube9})]}),zs=()=>s(Le,{children:s(vt,{children:s("div",{class:[As.loading,"atrament-loading"].join(" "),children:s(Bs,{})})})});var Gs={};function Pe(e,t){for(var n in t)e[n]=t[n];return e}function Us(e,t,n){var o,a=/(?:\?([^#]*))?(#.*)?$/,i=e.match(a),r={};if(i&&i[1])for(var c=i[1].split("&"),d=0;d<c.length;d++){var u=c[d].split("=");r[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=rt(e.replace(a,"")),t=rt(t||"");for(var _=Math.max(e.length,t.length),l=0;l<_;l++)if(t[l]&&t[l].charAt(0)===":"){var g=t[l].replace(/(^:|[+*?]+$)/g,""),h=(t[l].match(/[+*?]+$/)||Gs)[0]||"",f=~h.indexOf("+"),m=~h.indexOf("*"),b=e[l]||"";if(!b&&!m&&(h.indexOf("?")<0||f)){o=!1;break}if(r[g]=decodeURIComponent(b),f||m){r[g]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){o=!1;break}return(n.default===!0||o!==!1)&&r}function Ws(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function Ks(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:rt(n.props.path).map(qs).join("")}(e),e.props}function rt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function qs(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Ys={},oe=[],Bt=[],V=null,Yn={url:bt()},Xs=He(Yn);function bt(){var e;return""+((e=V&&V.location?V.location:V&&V.getCurrentLocation?V.getCurrentLocation():typeof location<"u"?location:Ys).pathname||"")+(e.search||"")}function X(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var o=oe.length;o--;)if(oe[o].canRoute(n))return!0;return!1}(e)&&function(n,o){o===void 0&&(o="push"),V&&V[o]?V[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)}(e,t?"replace":"push"),Xn(e)}function Xn(e){for(var t=!1,n=0;n<oe.length;n++)oe[n].routeTo(e)&&(t=!0);return t}function Js(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return X(t)}}function Qs(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Zs(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Js(t))return Qs(e)}while(t=t.parentNode)}}var zt=!1;function Jn(e){e.history&&(V=e.history),this.state={url:e.url||bt()}}Pe(Jn.prototype=new ke,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=tt(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;zt||(zt=!0,V||addEventListener("popstate",function(){Xn(bt())}),addEventListener("click",Zs)),oe.push(this),V&&(this.u=V.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),oe.splice(oe.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(Ks).sort(Ws);for(var n=0;n<e.length;n++){var o=e[n],a=Us(t,o.props.path,o.props);if(a)return[o,a]}},render:function(e,t){var n,o,a=e.onChange,i=t.url,r=this.c,c=this.g(tt(e.children),i);if(c&&(o=ko(c[0],Pe(Pe({url:i,matches:n=c[1]},n),{key:void 0,ref:void 0}))),i!==(r&&r.url)){Pe(Yn,r=this.c={url:i,previous:r&&r.url,current:o,path:o?o.props.path:null,matches:n}),r.router=this,r.active=o?[o]:[];for(var d=Bt.length;d--;)Bt[d]({});typeof a=="function"&&a(r)}return Se(Xs.Provider,{value:r},o)}});function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},De.apply(null,arguments)}var re;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(re||(re={}));var Gt=function(e){return e};function ea(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,a=t.initialIndex,i=o.map(function(y){var k=Gt(De({pathname:"/",search:"",hash:"",state:null,key:Kt()},typeof y=="string"?qt(y):y));return k}),r=Ut(a??i.length-1,0,i.length-1),c=re.Pop,d=i[r],u=Wt(),_=Wt();function l(y){return typeof y=="string"?y:ta(y)}function g(y,k){return k===void 0&&(k=null),Gt(De({pathname:d.pathname,search:"",hash:""},typeof y=="string"?qt(y):y,{state:k,key:Kt()}))}function h(y,k,M){return!_.length||(_.call({action:y,location:k,retry:M}),!1)}function f(y,k){c=y,d=k,u.call({action:c,location:d})}function m(y,k){var M=re.Push,O=g(y,k);function B(){m(y,k)}h(M,O,B)&&(r+=1,i.splice(r,i.length,O),f(M,O))}function b(y,k){var M=re.Replace,O=g(y,k);function B(){b(y,k)}h(M,O,B)&&(i[r]=O,f(M,O))}function v(y){var k=Ut(r+y,0,i.length-1),M=re.Pop,O=i[k];function B(){v(y)}h(M,O,B)&&(r=k,f(M,O))}var x={get index(){return r},get action(){return c},get location(){return d},createHref:l,push:m,replace:b,go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(k){return u.push(k)},block:function(k){return _.push(k)}};return x}function Ut(e,t,n){return Math.min(Math.max(e,t),n)}function Wt(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function Kt(){return Math.random().toString(36).substr(2,8)}function ta(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,a=o===void 0?"":o,i=e.hash,r=i===void 0?"":i;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function qt(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function na(e,t,n){let o=new Set(t).add(void 0);return e.listen((a,i,r)=>{o.has(r)&&n(a,i,r)})}function oa(e,t={}){let[,n]=w({}),[o]=w(e.get());return P(()=>{o!==e.get()&&n({})},[]),P(()=>{let a,i,r,c=()=>{a||(a=1,i=setTimeout(()=>{a=void 0,n({})}))};return t.keys?r=na(e,t.keys,c):r=e.listen(c),()=>{r(),clearTimeout(i)}},[e,""+t.keys]),e.get()}const S=()=>{const e=Ee(gt),t=p(l=>{try{return l()}catch(g){return e.ink.story().onError&&e.ink.story().onError(g.toString()),null}},[e]),n=p(l=>l?e.game.getAssetPath(l):null,[e]),o=p((l,g)=>{e.settings.set(l,g),e.settings.save()},[e]),a=p((...l)=>e.state.setSubkey(...l),[e]),i=p((l,g=[])=>{let h={};try{h=e.ink.evaluateFunction(l,g,!0)}catch(f){e.ink.story().onError&&e.ink.story().onError(f.toString()),h.error=f.toString()}return h},[e]),r=p((...l)=>t(()=>e.ink.setVariable(...l)),[e,t]),c=p((...l)=>t(()=>e.ink.getVariable(...l)),[e,t]),d=p((...l)=>t(()=>e.game.makeChoice(...l)),[e,t]),u=p((...l)=>t(()=>e.game.continueStory(...l)),[e,t]),_=p(()=>{e.state.setSubkey("game","background",null),e.state.setSubkey("game","background_page",null)},[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:d,continueStory:u,getAssetPath:n,updateSettings:o,setStateSubkey:a,evaluateInkFunction:i,setInkVariable:r,getInkVariable:c,resetBackground:_}},A=(e=void 0)=>{const t=Ee(gt);return oa(t.store,{keys:e})},Qn=()=>{const{evaluateInkFunction:e,setStateSubkey:t}=S(),n=A([H]),o=p((r,c)=>{t(H,"current",r);let d=c;const u=c.split(`
`),l=u.shift().match(/\[title\](.+?)\[\/title\]/i);l&&(t(H,"title",l[1]),d=u.join(`
`)),t(H,"content",d)},[t]),a=p(()=>{const r=n[H].current;if(r){const c=e(r);o(r,c.output)}},[n,o,e]),i=p(()=>{t(H,"current",null),t(H,"content",""),t(H,"title",null)},[t]);return{refreshOverlay:a,closeOverlay:i,setOverlayContent:o,overlay:{current:n[H].current,content:n[H].content.split(`
`),title:n[H].title}}},sa="_menu_toggle_j3iyw_1",aa="_menu_content_j3iyw_15",ia="_atrament_version_j3iyw_19",ra="_atrament_about_j3iyw_33",ca="_atrament_appversion_j3iyw_39",pe={menu_toggle:sa,menu_content:aa,atrament_version:ia,atrament_about:ra,atrament_appversion:ca},la=()=>s("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:s("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})}),ua=()=>s("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),da=()=>s("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),_a=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",children:[s("path",{d:"M0 0h24v24H0z",fill:"none"}),s("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),fa=()=>s("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100%",height:"100%",viewBox:"0 0 122.88 101.878","enable-background":"new 0 0 122.88 101.878",children:s("g",{children:s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M64.406,12.143c-2.672-1.042-5.431-1.586-8.276-1.586 c-4.279,0-7.798,1.369-10.557,4.084L21.765,38.427l2.477,2.499l-9.037,9.101L0,34.799l9.036-9.037l2.802,2.737L35.515,4.844 C38.773,1.608,42.271,0,46.007,0C52.285,0,58.411,4.041,64.406,12.143L64.406,12.143z M100.535,5.408 c2.588,0,5.072,0.441,7.384,1.25l-5.874,6.358c-13.345,14.437,1.715,22.79,14.986,12.879l5.119-3.822 c0.475,1.813,0.729,3.717,0.729,5.679c0,12.341-10.003,22.345-22.345,22.345c-4.026,0-7.804-1.065-11.066-2.929L78.616,58.689 c10.214,9.778,20.431,19.554,30.646,29.33l-13.858,13.858C85.74,91.8,76.08,81.718,66.422,71.635L47.394,91.833 c-1.445,2.471-4.126,4.132-7.194,4.132c-4.599,0-8.329-3.729-8.329-8.329c0-1.988,0.699-3.815,1.862-5.247l-0.012-0.012 l0.073-0.063c0.601-0.723,1.322-1.342,2.132-1.828L57.327,62.14L30.941,34.504L41.89,23.556 c10.157,9.756,18.402,17.582,28.572,27.324l11.864-10.172c-2.604-3.654-4.136-8.125-4.136-12.955 C78.19,15.411,88.193,5.408,100.535,5.408L100.535,5.408z M28.63,10.362L17.747,21.245l-2.086-2.085L26.544,8.276L28.63,10.362 L28.63,10.362z",style:"fill:var(--accent-fg-color)"})})}),ha="_link_menu_go234_1",ga={link_menu:ha},F=({children:e,key:t,onClick:n,attributes:o={}})=>s("div",{children:s("button",{onClick:n,class:ga.link_menu,...o,children:e},t)}),ma="_link_home_1sln5_1",pa={link_home:ma},yt=({children:e,onClick:t})=>s("button",{onClick:t,class:pa.link_home,children:e},"mainmenu"),va="_header_1v1u3_1",ba="_header_align_1v1u3_9",Yt={header:va,header_align:ba},Ve=({children:e})=>s("div",{class:[Yt.header,"atrament-header"].join(" "),children:s("div",{class:Yt.header_align,children:e})}),ya={break:"_break_jkn3k_1"},ce=()=>s("div",{class:ya.break}),ka="_debug_toggle_1xfgt_1",wa="_debug_container_1xfgt_15",Sa="_container_1xfgt_30",xa="_input_div_1xfgt_46",Ca="_button_1xfgt_50",$a="_input_1xfgt_46",Ea="_errormsg_1xfgt_74",La="_unknown_tag_1xfgt_82",T={debug_toggle:ka,debug_container:wa,container:Sa,input_div:xa,button:Ca,input:$a,errormsg:Ea,unknown_tag:La},Aa="_collapse_19tvh_1",Ta="_collapse_title_19tvh_6",Pa="_collapse_children_19tvh_12",Ke={collapse:Aa,collapse_title:Ta,collapse_children:Pa},ge=({title:e,children:t,open:n=!1})=>s("details",{class:Ke.collapse,open:n,children:[s("summary",{class:Ke.collapse_title,children:e}),s("div",{class:Ke.collapse_children,children:t})]}),Oa="_table_1j39a_1",ja="_cell_full_1j39a_13",Ma="_cell_padding_1j39a_21",Ia="_thead_border_1j39a_29",Da="_tbody_border_1j39a_37",Va="_caption_1j39a_53",Fa="_page_1j39a_79",Ha="_page_active_1j39a_87",G={table:Oa,cell_full:ja,cell_padding:Ma,thead_border:Ia,tbody_border:Da,caption:Va,page:Fa,page_active:Ha},me=({columns:e=[],data:t=[],pageSize:n=0,border:o=!0,padding:a=!0,columnWidth:i=[]})=>{const[r,c]=w(0);P(()=>{c(0)},[t]);let d=1,u=0,_=t.length;n&&(d=Math.ceil(t.length/n),u=r*n,_=u+n);const l=h=>{c(+h.target.value)},g=t.slice(u,_);return s("table",{class:G.table,children:[n>0&&s("caption",{class:G.caption,children:[...Array(d).keys()].map(h=>s("button",{onClick:l,value:h,class:h===r?G.page_active:G.page,children:h+1},h))}),e.length>0&&s("thead",{children:s("tr",{class:o?G.thead_border:"",children:e.map((h,f)=>{const m=h.style||{};return i[f]&&(m.width=i[f]),s("th",{class:a?G.cell_padding:G.cell_full,style:m,children:h.name},f)})})}),g.length>0&&s("tbody",{children:g.map((h,f)=>s("tr",{class:o?G.tbody_border:"",children:h.map((m,b)=>{const v={};return i[b]&&(v.width=i[b]),s("td",{class:a?G.cell_padding:G.cell_full,style:v,children:m},b)})},f))})]})},Ra=()=>{const{atrament:e}=S(),t=I(),o=e.ink.story().state,a=e.state.get().game,i=[[t.translate("debug.info.ink-file"),`${a.$path}/${a.$file}`],[t.translate("debug.info.story-seed"),o.storySeed],[t.translate("debug.info.current-turn-index"),o.currentTurnIndex],[t.translate("debug.info.path"),a.$story_path]];return s(ge,{title:t.translate("debug.info"),open:!0,children:s(me,{data:i})})},Na=({closeFn:e})=>{const{atrament:t}=S(),[n,o]=w(""),[a,i]=w(""),r=d=>{o(d.target.value),i("")},c=()=>{if(n){try{t.ink.goTo(n),t.game.continueStory(),e()}catch(d){i(d.toString())}o("")}};return s($,{children:[s("div",{class:T.container,children:[s("div",{children:[s(C,{id:"debug.go-to-path"}),":"]}),s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",value:n,onInput:r})}),s("div",{children:[s("button",{class:T.button,onClick:c,children:">>>"})," ",s("br",{})]})]}),s("div",{class:T.container,children:s("span",{class:T.errormsg,children:a})})]})},Ba=()=>{const{atrament:e}=S(),t=I(),n=e.ink.getGlobalTags(),o=Object.keys(n).map(a=>Bo.includes(a)?[a,n[a]]:[s("span",{class:T.unknown_tag,title:t.translate("debug.unknown-tag"),children:a},a),n[a]]);return s(ge,{title:t.translate("debug.global-tags"),open:!0,children:s(me,{data:o})})},za="_button_pofct_1",Ga="_button_close_pofct_33",Ua="_input_pofct_65",Wa="_toggle_pofct_91",Ka="_listview_pofct_103",J={button:za,button_close:Ga,input:Ua,toggle:Wa,listview:Ka},qa="_checkbox_wrapper_1bc4s_1",Ya="_checkbox_1bc4s_1",Xt={checkbox_wrapper:qa,checkbox:Ya},Be=({enabled:e,onChange:t})=>s("div",{class:Xt.checkbox_wrapper,children:s("input",{type:"checkbox",class:Xt.checkbox,checked:e,onChange:t})}),Xa=({value:e,setNewValue:t})=>{const n=o=>t(+o.target.value);return s("input",{class:J.input,type:"number",value:e,onInput:n})},Ja=({value:e,setNewValue:t})=>{const n=o=>t(o.target.value);return s("input",{class:J.input,type:"text",value:e,onInput:n})},Qa=({value:e,setNewValue:t})=>{const n=o=>t(o.target.checked);return s("div",{class:J.toggle,children:s(Be,{enabled:e,onChange:n})})},Za=({name:e,value:t})=>{if(e===t._originNames[0]&&t.size===0){const o=[...t.origins[0]._itemNameToValues.keys()];return s("span",{class:J.listview,children:JSON.stringify(o).replace(/,/g,", ")})}const n=[];return t.forEach((o,a)=>n.push([JSON.parse(a),o])),s("ul",{class:J.listview,children:n.map(([o,a])=>s("li",{children:[s("abbr",{title:o.originName,children:o.itemName}),": ",a]},o))})},ei=({name:e,value:t})=>{const{getInkVariable:n,setInkVariable:o}=S(),a=I(),[i,r]=w(!1),[c,d]=w(!1),[u,_]=w(!1);P(()=>{const f=n(e);d(f),_(f)},[e,n,d,_]);const l=f=>{f.preventDefault(),r(!0)},g=()=>r(!1),h=()=>{u!==c&&(o(e,u),d(u)),r(!1)};return i?s($,{children:[s("button",{class:J.button_close,onClick:g,title:a.translate("debug.variables.cancel"),children:"X"}),typeof t=="number"&&s(Xa,{value:u,setNewValue:_}),typeof t=="string"&&s(Ja,{value:u,setNewValue:_}),typeof t=="boolean"&&s(Qa,{value:u,setNewValue:_}),s("button",{class:J.button,onClick:h,title:a.translate("debug.variables.save"),children:">"})]}):s($,{children:typeof u=="object"?s(Za,{name:e,value:u}):s("button",{class:J.button,onClick:l,children:JSON.stringify(u)})})};function ti(e){const t=e.ink.getVariables();return Object.entries(t).sort((o,a)=>o[0]>a[0]?0:-1)}const ni=({variables:e})=>{const t=I(),n=e.map((o,a)=>[o[0],s(ei,{name:o[0],value:o[1]},a)]);return s(me,{columns:[{name:t.translate("debug.variables.name"),style:{width:"25%","text-align":"left"}},{name:t.translate("debug.variables.value"),style:{"text-align":"left"}}],data:n,pageSize:10})},oi=()=>{const[e,t]=w(""),{atrament:n}=S(),o=I(),a=ti(n).filter(r=>r[0].includes(e)),i=r=>{t(r.target.value)};return s(ge,{title:o.translate("debug.variables"),children:[s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:i})}),s(ni,{variables:a})]})};function si(e){const t=e.ink.story().state._visitCounts,n=[];for(let o of t)n.push(o);return n.sort((o,a)=>o[0]>a[0]?0:-1)}const ai=()=>{const{atrament:e}=S(),t=I(),n=si(e);return s(ge,{title:t.translate("debug.visits"),children:s(me,{data:n})})},ii=()=>{const{atrament:e}=S(),t=I(),[n,o]=w(""),[a,i]=w(null),[r,c]=w(""),[d,u]=w(null),_=f=>{let m=[];try{m=JSON.parse(f)}catch{}return m},l=f=>{o(f.target.value),c(""),u(null)},g=f=>{i(f.target.value),c(""),u(null)},h=()=>{if(n)try{const f=e.ink.evaluateFunction(n,_(a),!0);u(f),c("")}catch(f){c(f.toString())}};return s(ge,{title:t.translate("debug.functions"),children:[s("div",{class:T.container,children:[s("div",{children:[s(C,{id:"debug.functions.run-function"}),":"]}),s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",value:n,onInput:l})})]}),s("div",{class:T.container,children:[s("div",{children:[s(C,{id:"debug.functions.arguments"}),":"]}),s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",value:a,onInput:g,placeholder:t.translate("debug.functions.arguments_placeholder"),title:t.translate("debug.functions.arguments_placeholder")})}),s("div",{children:[s("button",{class:T.button,onClick:h,children:">>>"})," ",s("br",{})]})]}),s("div",{class:T.container,children:s("pre",{children:n&&`${n}(${a?_(a).map(JSON.stringify).join(", "):""})`})}),r&&s("div",{class:T.container,children:s("span",{class:T.errormsg,children:r})}),s("div",{class:T.container,children:d&&s(me,{data:[[t.translate("debug.functions.returned-value"),JSON.stringify(d.returned)],[t.translate("debug.functions.output"),s("pre",{children:d.output},"output")]]})})]})},ri=()=>{const[e,t]=w(!1),[n,o]=w(!1),a=I(),i=p(()=>t(!e),[e]),r=p(c=>{c.code==="Backquote"&&(n?(i(),o(!1)):(o(!0),setTimeout(()=>o(!1),1e3)))},[i,n,o]);return P(()=>(document.addEventListener("keydown",r,!1),()=>{document.removeEventListener("keydown",r,!1)}),[r]),e?s("div",{class:T.debug_container,children:[s(pt,{onClick:i}),s(Ra,{}),s(Ba,{}),s(oi,{}),s(ai,{}),s(ii,{}),s(Na,{closeFn:i})]}):s("button",{class:T.debug_toggle,onClick:i,title:a.translate("debug"),children:s(fa,{})})},ci=()=>{const{metadata:e}=A(["metadata"]);return e.debug?s(ri,{}):s($,{})},li="_container_kfk52_1",ui="_prompt_kfk52_7",di="_menu_item_kfk52_15",_i="_small_kfk52_49",fi="_is_deletable_kfk52_54",hi="_delete_button_kfk52_58",gi="_delete_item_kfk52_79",R={container:li,prompt:ui,menu_item:di,small:_i,is_deletable:fi,delete_button:hi,delete_item:gi},Jt=({prompt:e,onAccept:t,onReject:n,attributes:o})=>s("div",{class:R.container,children:[s("div",{class:R.prompt,children:e}),s("button",{onClick:t,class:`${R.menu_item} ${R.delete_item} ${R.small}`,...o,children:s(C,{id:"yes"})}),s("button",{onClick:n,class:`${R.menu_item} ${R.small}`,...o,children:s(C,{id:"no"})})]}),kt=({children:e,key:t,onSelect:n,isDisabled:o=!1,isDeletable:a=!1,onDelete:i=()=>{},deletePrompt:r="",hasConfirmation:c=!1,confirmPrompt:d="",attributes:u={}})=>{const[_,l]=w(!1),[g,h]=w(!1),f=()=>l(!0),m=()=>l(!1),b=k=>{i(k),m()},v=()=>h(!0),x=()=>h(!1),y=k=>{n(k),x()};return g?s(Jt,{prompt:d,onAccept:y,onReject:x,attributes:u}):_?s(Jt,{prompt:r,onAccept:b,onReject:m,attributes:u}):s("div",{class:R.container,children:[s("button",{onClick:c?v:n,disabled:o,class:`${R.menu_item} ${a&&R.is_deletable}`,...u,children:e},t),a&&!o&&s("button",{onClick:f,class:`${R.menu_item} ${R.delete_button}`,...u,children:"✕"},t)]})},Qt=e=>new Date(e).toLocaleString(In),Zn=({loadGame:e,hasConfirmation:t=!1})=>{const[n,o]=w([]),a=I(),{atrament:i}=S(),{metadata:r}=A(["metadata"]),c=p(async()=>{const _=await i.game.listSaves(),l=[],g=_.filter(f=>f.type===i.game.SAVE_AUTOSAVE).map(f=>({...f,slot:a.translate("main.autosave",{date:Qt(f.date)})}));if(g.length&&l.push(g[0]),r.load_from_checkpoints){const f=_.filter(m=>m.type===i.game.SAVE_CHECKPOINT).map(m=>({...m,slot:typeof m.name=="boolean"?a.translate("main.checkpoint"):a.translate("main.checkpoint-named",{name:m.name})}));f.length&&l.push(...f)}const h=_.filter(f=>f.type===i.game.SAVE_GAME).map(f=>({...f,slot:Qt(f.date)}));l.push(...h),o(l)},[i,r,a]),d=p(async _=>{const l=_.target.getAttribute("data-save");await e(l)},[e]),u=p(async _=>{const l=_.target.getAttribute("data-save");await i.game.removeSave(l),await c()},[i,c]);return P(()=>{(async()=>c())()},[c]),s($,{children:n.map(_=>s(kt,{onSelect:d,onDelete:u,isDisabled:!_.type,isDeletable:_.type,deletePrompt:a.translate("main.delete-save"),hasConfirmation:t,confirmPrompt:a.translate("main.confirm-load"),attributes:{"data-save":_.id},children:_.slot},_.name))})},mi=e=>new Date(e).toLocaleString(In),pi=({saveGame:e})=>{const[t,n]=w([]),o=I(),{atrament:a}=S(),{metadata:i}=A(["metadata"]),r=i.saves?+i.saves:0,c=p(async()=>{const l=(await a.game.listSaves()).filter(g=>g.type===a.game.SAVE_GAME).map(g=>({...g,slot:mi(g.date)}));l.length<r&&l.push({name:l.length+1,slot:o.translate("main.new-save")}),n(l)},[a,o,r]),d=p(async _=>{const l=_.target.getAttribute("data-savename");await e(l),await c()},[e,c]),u=p(async _=>{const l=_.target.getAttribute("data-saveid");await a.game.removeSave(l),await c()},[a,c]);return P(()=>{(async()=>c())()},[c]),s($,{children:t.map(_=>s(kt,{onSelect:d,onDelete:u,isDisabled:!1,isDeletable:_.type,deletePrompt:o.translate("main.delete-save"),hasConfirmation:_.type,confirmPrompt:o.translate("main.confirm-save"),attributes:{"data-saveid":_.id,"data-savename":_.name},children:_.slot},_.name))})},vi="_settings_container_1lyb2_1",bi={settings_container:vi},yi=()=>{const{updateSettings:e}=S(),t=A(["settings"]),n=o=>e("fullscreen",o.target.checked);return s("div",{class:["atrament-settings-fullscreen"].join(" "),children:[s(Be,{enabled:t.settings.fullscreen,onChange:n})," ",s(C,{id:"settings.fullscreen"})]})},ki="_settings_sound_container_1abud_1",wi="_settings_sound_input_container_1abud_6",Si="_settings_sound_volume_1abud_10",xi="_settings_sound_icon_1abud_17",ae={settings_sound_container:ki,settings_sound_input_container:wi,settings_sound_volume:Si,settings_sound_icon:xi},Ci=()=>{const{updateSettings:e}=S(),t=A(["settings"]),n=r=>e("mute",!r.target.checked),o=r=>e("volume",r.target.value),{mute:a,volume:i}=t.settings;return s($,{children:[s("div",{class:[ae.settings_sound,"atrament-settings-sound"].join(" "),children:[s(Be,{enabled:!a,onChange:n})," ",s(C,{id:"settings.sound"})]}),s("div",{class:ae.settings_sound_container,children:[s("div",{class:ae.settings_sound_icon,children:s(da,{})}),s("div",{class:ae.settings_sound_input_container,children:s("input",{class:ae.settings_sound_volume,disabled:a,type:"range",min:"0",max:"100",value:i,onChange:o})}),s("div",{class:ae.settings_sound_icon,children:s(ua,{})})]})]})},$i="_settings_fontsize_container_1ho7s_1",Ei="_settings_font_a_1ho7s_6",Li="_settings_fontsize_input_container_1ho7s_12",Ai="_settings_fontsize_input_1ho7s_12",Ti="_settings_font_sample_1ho7s_22",Z={settings_fontsize_container:$i,settings_font_a:Ei,settings_fontsize_input_container:Li,settings_fontsize_input:Ai,settings_font_sample:Ti},eo=[];for(let e=at;e<=it;e+=Ne)eo.push(e);const Pi=()=>{const{updateSettings:e}=S(),t=A(["settings"]),{font:n,fontSize:o}=t.settings,a=i=>e("fontSize",i.target.value);return s("div",{class:[Z.settings_text,"atrament-settings-text"].join(" "),children:[s("div",{class:Z.settings_fontsize_container,children:[s("div",{class:Z.settings_font_a,style:{"font-size":`${at}%`},children:"A"}),s("div",{class:Z.settings_fontsize_input_container,children:[s("input",{class:Z.settings_fontsize_input,type:"range",min:at,max:it,step:Ne,value:o||mt,onInput:a,list:"fontSizes"}),s("datalist",{id:"fontSizes",children:eo.map(i=>s("option",{value:i},i))})]}),s("div",{class:Z.settings_font_a,style:{"font-size":`${it}%`},children:"A"})]}),s("div",{class:Z.settings_font_sample,style:{"font-size":`${o}%`,"font-family":he[n]},children:s(C,{id:"font.sampleText"})})]})},Oi="_settings_font_container_yph84_1",ji={settings_font_container:Oi},Mi=()=>{const{updateSettings:e}=S(),t=A(["settings"]),n=a=>e("font",a.target.value),o=t.settings.font;return s("div",{class:[ji.settings_font_container,"atrament-settings-font"].join(" "),children:s("select",{onChange:n,style:{"font-family":he[o]},children:Object.entries(he).map(([a,i])=>s("option",{value:a,style:{"font-family":i},selected:o===a,children:a},a))})})},Ii="_settings_theme_container_1gr28_1",Di="_settings_theme_button_1gr28_8",to={settings_theme_container:Ii,settings_theme_button:Di},Vi=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["fg-color"],"background-color":t["bg-color"]};return s("button",{class:to.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:s(C,{id:`themes.${e}`,defaultMessage:e})})},Fi=()=>{const{updateSettings:e}=S(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return s("div",{class:[to.settings_theme_container,"atrament-settings-theme"].join(" "),children:Object.entries(ue).map(([n,o])=>s(Vi,{themeId:n,themeConfig:o,onClick:t},n))})},Hi=()=>{const{updateSettings:e}=S(),t=A(["settings"]),n=o=>e("animation",o.target.checked);return s("div",{class:["atrament-settings-animation"].join(" "),children:[s(Be,{enabled:t.settings.animation,onChange:n})," ",s(C,{id:"settings.animations"})]})},ct=()=>{const e=I();return s("div",{class:bi.settings_container,children:[s(yi,{}),s(Hi,{}),s(Ci,{}),s(ge,{title:e.translate("settings.appearance"),children:[s(Mi,{}),s(Pi,{}),s(Fi,{})]})]})},Ri="_header_1gyyv_1",Ni="_infobox_1gyyv_19",Zt={header:Ri,infobox:Ni},Bi=""+new URL("atrament-logo-D7LOrOOl.png",import.meta.url).href,zi=""+new URL("iftf-logo-BWs-h1t3.png",import.meta.url).href,no=[["Atrament Core","https://github.com/technix/atrament-core"],["Atrament Web","https://github.com/technix/atrament-web"],["Atrament Web UI","https://github.com/technix/atrament-web-ui"],["InkJS","https://github.com/y-lohse/inkjs"],["Preact","https://preactjs.com/"],["Howler","https://howlerjs.com/"],["Nanostores","https://github.com/nanostores/nanostores"],["LocalForage","https://github.com/localForage/localForage"],["fflate","https://github.com/101arrowz/fflate"]],Gi=no.length-1,en=({href:e,children:t})=>s("a",{href:e,target:"_blank",rel:"noreferrer",children:t}),Ui='<a href="https://iftechfoundation.org/" target="_blank" rel="noreferrer">Interactive Fiction Technology Foundation</a>',Wi=({onClick:e})=>s(K,{children:s("div",{onClick:n=>n.target.tagName.toLowerCase()==="a"?"":e(n),children:[s("div",{class:Zt.header,children:[s("img",{src:Bi}),s("h1",{children:["Atrament ",s("small",{children:On})]})]}),s("p",{children:s(en,{href:"https://atrament.ink/",children:"https://atrament.ink/"})}),s("p",{children:[s(C,{id:"about.components"}),": ",no.map((n,o)=>s("span",{children:[s(en,{href:n[1],children:n[0]}),o===Gi?".":","," "]},n[1]))]}),s("div",{class:Zt.infobox,children:[s("img",{src:zi}),s("p",{children:s(C,{id:"about.iftf_support",html:!0,iftf:Ui})})]})]})}),Ki=()=>s(yt,{onClick:()=>X("/"),children:s(C,{id:"game.quit"})}),qi=()=>{const{atrament:e}=S(),t=e.interfaces.platform.exitApp;return s($,{children:[s(ct,{}),t?s($,{children:[s(ce,{}),s(yt,{onClick:t,children:s(C,{id:"main.exit"})})]}):""]})},Yi=({toggleMenu:e})=>{const{atrament:t}=S(),n=A(["metadata"]),{saves:o,load_from_checkpoints:a}=n.metadata,[i,r]=w(!1),[c,d]=w(!1),[u,_]=w(!1),l=p(()=>r(!i),[i]),g=p(()=>d(!c),[c]),h=p(()=>_(!u),[u]),f=p(async b=>{await t.game.restart(b),g(),e()},[t,e,g]),m=p(async b=>{await t.game.saveGame(b)},[t]);return i?s($,{children:[s(Ve,{children:s("h2",{children:s(C,{id:"main.savegame"})})}),s(pi,{saveGame:m}),s(ce,{}),s(F,{onClick:l,children:s(C,{id:"cancel"})},"go-back")]}):c?s($,{children:[s(Ve,{children:s("h2",{children:s(C,{id:"main.loadgame"})})}),s(Zn,{loadGame:f,hasConfirmation:!0}),s(ce,{}),s(F,{onClick:g,children:s(C,{id:"cancel"})},"go-back")]}):u?s($,{children:[s(ct,{}),s(ce,{}),s(F,{onClick:h,children:s(C,{id:"back"})},"go-back")]}):s($,{children:[o?s(F,{onClick:l,children:s(C,{id:"main.savegame"})},"save-game"):null,o||a?s(F,{onClick:g,children:s(C,{id:"main.loadgame"})},"load-game"):null,o||a?s(F,{onClick:h,children:s(C,{id:"main.settings"})},"settings"):s(ct,{}),s(ce,{}),s(Ki,{})]})},Xi=({isHomeScreen:e,toggleMenu:t})=>e?s(qi,{}):s(Yi,{toggleMenu:t}),wt=({isHomeScreen:e=!1})=>{const[t,n]=w(!1),[o,a]=w(!1),i=p(()=>{n(!t),a(!1)},[t]),r=p(()=>a(!o),[o]),c=p(d=>{d.key==="Escape"&&(i(),a(!1))},[i,a]);return P(()=>(document.addEventListener("keydown",c,!1),()=>{document.removeEventListener("keydown",c,!1)}),[c]),t?s(Un,{children:[s(Wn,{onClick:i}),s(Kn,{children:s("div",{class:pe.menu_content,children:[s(pt,{onClick:i}),o?s(Wi,{onClick:r}):s($,{children:[s(Xi,{isHomeScreen:e,toggleMenu:i}),s("div",{class:pe.atrament_version,onClick:r,children:[s("div",{class:pe.atrament_about,children:"?"}),s("div",{class:pe.atrament_appversion,children:["Atrament ",On]})]})]})]})})]}):s($,{children:[s("button",{class:pe.menu_toggle,onClick:i,children:s(la,{})}),s(ci,{})]})},Ji=({newGame:e,loadGame:t,resumeGame:n,canResume:o})=>{const[a,i]=w([]),r=I(),{atrament:c}=S(),{metadata:d}=A(["metadata"]),u=p(async()=>{const g=await c.game.getSessions();let h=!0;i([...Array(+d.sessions).keys()].map(f=>{const m=f+1,b=`session${m}`,v=!!g[`session${m}`],x=v||h;return!v&&h&&(h=!1),{id:m,name:b,hasSaves:v,canStart:x}}))},[c,d,i]),_=p(async g=>{const h=g.target.getAttribute("data-session"),f=a.filter(m=>m.name===h)[0];f&&(c.game.setSession(h),f.hasSaves?await o()?await n():await t():await e())},[c,a,e,o,n,t]),l=p(async g=>{const h=g.target.getAttribute("data-session");await c.game.removeSession(h),await u()},[c,u]);return P(()=>{(async()=>u())()},[u]),s($,{children:a.map(g=>s(kt,{onSelect:_,onDelete:l,isDisabled:!g.canStart,isDeletable:g.hasSaves,deletePrompt:r.translate("main.delete-session"),attributes:{"data-session":g.name},children:g.hasSaves?s(C,{id:"main.continue-session",session:g.id}):g.canStart?s(C,{id:"main.newgame"}):s(C,{id:"main.emptyslot"})},g.name))})},St=()=>{const{resetBackground:e,gameStart:t,gameResume:n,continueStory:o}=S(),{metadata:a}=A(["metadata"]),i=p(async()=>{e(),await t(),o(),X("/game")},[e,t,o]),r=p(async()=>{e(),await n(),a.continue_maximally!==!1&&o(),X("/game")},[e,n,o,a]),c=p(async d=>{e(),await t(d),a.continue_maximally!==!1&&o(),X("/game")},[e,t,o,a]);return{newGame:i,resumeGame:r,loadGame:c}},oo=({children:e})=>{const{loadGame:t}=St();return s(K,{align:"end",children:[s(Ve,{children:s("h2",{children:s(C,{id:"main.loadgame"})})}),s(Zn,{loadGame:t}),s(ce,{}),e]})},Qi="_imagebox_1x268_1",Zi="_image_1x268_1",er="_illustration_1x268_10",qe={imagebox:Qi,image:Zi,illustration:er},xt=({src:e,options:t={}})=>s("div",{class:[qe.imagebox,"atrament-image-container"].join(" "),style:{"margin-left":t.leftmargin||"none","margin-right":t.rightmargin||"none"},children:s("img",{src:e,style:{width:t.width||"auto"},class:[qe.image,t.fullsize?"":qe.illustration,"atrament-image"].join(" ")})}),so=()=>{const{getAssetPath:e}=S(),t=I(),n=A(["metadata"]),{title:o,author:a,cover:i}=n.metadata;return s(Ve,{children:[i?s(xt,{src:e(i)}):"",s("h1",{children:o||t.translate("default.title")}),s("p",{children:a||t.translate("default.author")})]})},ao=()=>s(F,{onClick:()=>X("/about"),children:s(C,{id:"main.about"})},"about"),tr=({canBeResumed:e,canBeLoaded:t,openLoadGameMenu:n,about:o})=>{const{newGame:a,resumeGame:i}=St();return s($,{children:[s(so,{}),s(K,{align:"end",children:[e?s(F,{onClick:i,children:s(C,{id:"main.continue"})},"continuegame"):"",s(F,{onClick:a,children:s(C,{id:"main.newgame"})},"startgame"),t?s(F,{onClick:n,children:s(C,{id:"main.loadgame"})},"loadgame"):"",o?s(ao,{}):""]})]})},nr=()=>{const[e,t]=w(!1),{atrament:n,canResume:o}=S(),{newGame:a,resumeGame:i}=St(),{metadata:r}=A(["metadata"]);return s($,{children:e?s(oo,{children:s(F,{onClick:()=>{n.game.setSession(),t(!1)},children:s(C,{id:"cancel"})},"go-back")}):s($,{children:[s(so,{}),s(K,{align:"end",children:[s(Ji,{newGame:a,resumeGame:i,canResume:o,loadGame:()=>t(!0)}),r.about?s(ao,{}):""]})]})})},or=()=>{const[e,t]=w(!1),[n,o]=w(!1),[a,i]=w(!1),{atrament:r,canResume:c}=S(),{metadata:d}=A(["metadata"]),u=()=>t(!0),_=()=>t(!1);return P(()=>{(async()=>{const g=await c();o(!!g),(await r.game.listSaves()).filter(m=>d.load_from_checkpoints&&m.type===r.game.SAVE_CHECKPOINT?!0:m.type===r.game.SAVE_GAME).length&&i(!0)})()},[r.game,c,d,i]),s($,{children:e?s(oo,{children:s(F,{onClick:_,children:s(C,{id:"main.menu"})},"go-back")}):s(tr,{canBeResumed:n,canBeLoaded:a,openLoadGameMenu:u,about:d.about})})},io=(e,t)=>{e?(document.body.style.backgroundImage=`url(${t(e)})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"):document.body.style.backgroundImage="none"},sr=()=>{const{canResume:e,getAssetPath:t,resetBackground:n}=S(),o=A(["metadata"]),{background:a,sessions:i}=o.metadata;return P(()=>{n(),io(a,t)},[n,e,a,t]),s(Le,{children:s(vt,{children:[s(wt,{isHomeScreen:!0}),i?s(nr,{}):s(or,{})]})})},ar="_toolbar_y184t_1",ir={toolbar:ar},rr="_bannerblock_1ry2a_1",cr="_accent_1ry2a_11",lr="_allcaps_1ry2a_17",Ye={bannerblock:rr,accent:cr,allcaps:lr};function N(e){const t=e.match(/(\w+)=["']?((?:.?(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/g),n={};return t&&t.forEach(o=>{const[,a,i]=o.match(/(.+)=(.+)/);try{n[a]=JSON.parse(i)}catch{n[a]=i}}),n}const ur=({children:e,options:t})=>{const n=[Ye.bannerblock,t.style==="accent"?Ye.accent:"",t.allcaps?Ye.allcaps:""].join(" ");return s("div",{class:n,children:e})},dr={regexp:/\[banner(?:\s+[^\]]+)?\].*?\[\/banner\]/ig,replacer:(e,t)=>{const n=e.match(/\[banner(.*?)\](.*?)\[\/banner\]/i),o=N(n[1]);return s(ur,{options:o,children:t(n[2])})}},_r={regexp:/\[block(?:\s+[^\]]+)?\].+?\[\/block\]/ig,replacer:(e,t)=>{const n=e.match(/\[block(.*?)\](.+?)\[\/block\]/i);let o={};n[1]&&(o=N(n[1]));const a={display:"inline-block",width:o.width||"100%","text-align":o.align||"inherit","vertical-align":o.valign||"top"};return s("div",{style:a,children:t(n[2])})}},fr="_inline_button_ws4x6_1",hr="_bordered_button_ws4x6_19",tn={inline_button:fr,bordered_button:hr},gr=({children:e,options:t})=>{const{evaluateInkFunction:n}=S(),{setOverlayContent:o,refreshOverlay:a}=Qn(),i=p(c=>{c.stopPropagation();const d=t.onclick,u=n(d);u.output?o(d,u.output):a()},[n,o,a,t.onclick]);let r=t.bordered===!1?tn.inline_button:tn.bordered_button;return s("button",{class:r,onClick:i,disabled:t.disabled,children:e})},mr={regexp:/\[button[ =].+?\].+?\[\/button\]/ig,replacer:(e,t)=>{const n=e.match(/\[button([ =].+?)\](.+?)\[\/button\]/i);let o=n[1];o.startsWith("=")&&(o=`onclick${o}`);const a=N(o);return s(gr,{options:a,children:t(n[2])})}},pr={regexp:/\[css(?:\s+[^\]]+)?\].+?\[\/css\]/ig,replacer:(e,t)=>{const n=e.match(/\[css(.*?)\](.+?)\[\/css\]/i);let o={};return n[1]&&(o=N(n[1])),s("span",{class:o.class,style:o.style,children:t(n[2])})}},vr={regexp:/\[font=.+?\].+?\[\/font\]/ig,replacer:(e,t)=>{const n=e.match(/\[font=(.+?)\](.+?)\[\/font\]/i);return s("span",{style:{"font-family":n[1]},children:t(n[2])})}},br={regexp:/\[highlight(?:\s+[^\]]+)?\].+?\[\/highlight\]/ig,replacer:(e,t)=>{const n=e.match(/\[highlight(.*?)\](.+?)\[\/highlight\]/i);let o={};n[1]&&(o=N(n[1]));const a={"background-color":o.bgcolor||"var(--accent-bg-color)",color:o.color||"var(--accent-fg-color)",padding:o.bgcolor?"0.1em":"inherit","box-decoration-break":"clone"};return s("span",{style:a,children:t(n[2])})}},yr="_infoblock_10o9f_1",kr="_font_ui_10o9f_9",wr="_side_highlight_10o9f_13",Sr="_side_accent_10o9f_17",Oe={infoblock:yr,font_ui:kr,side_highlight:wr,side_accent:Sr},xr=({children:e,options:t})=>{const n=[Oe.infoblock,t.font==="system"?Oe.font_ui:"",t.side==="accent"?Oe.side_accent:"",t.side==="highlight"?Oe.side_highlight:""].join(" ");return s("div",{class:n,children:e})},Cr={regexp:/\[info(?:\s+[^\]]+)?\].*?\[\/info\]/ig,replacer:(e,t)=>{const n=e.match(/\[info(.*?)\](.*?)\[\/info\]/i),o=N(n[1]);return s(xr,{options:o,children:t(n[2])})}},$r="_inline_image_1jlev_1",Er={inline_image:$r},Lr=({src:e})=>{const{getAssetPath:t}=S();return s("img",{class:Er.inline_image,src:t(e)})},Ar={regexp:/\[img\].+?\[\/img\]/ig,replacer:e=>{const t=e.match(/\[img\](.+?)\[\/img\]/i);return s(Lr,{src:t[1]})}},Tr="_input_1c260_1",Pr={input:Tr},Or=({options:e})=>{const t=Ee(Pn),[n,o]=w(null),{getInkVariable:a,setInkVariable:i}=S();P(()=>o(a(e.var)),[a,e.var]);const r=d=>{let u=d.srcElement.value||n;e.type==="number"&&(u=+u),i(e.var,u),o(u)},c=e.type==="number"?"number":"text";return s("input",{disabled:!t,class:Pr.input,value:n,placeholder:e.placeholder,type:c,onInput:r})},jr={regexp:/\[input .+?\]/ig,replacer:e=>{const t=e.match(/\[input(.+?)\]/i),n=N(t[1]);return s(Or,{options:n})}},Mr="_inline_link_1di4e_1",Ir={inline_link:Mr},Dr=({children:e,choice:t})=>{const{atrament:n,makeChoice:o,continueStory:a}=S(),i=A(["scenes"]),r=p(()=>{const c=i.scenes.length-1,u=i.scenes[c].choices.findIndex(_=>_.choice===t);if(u<0){n.state.setKey(ie,`[link=${t}] leads to nonexistent choice!`);return}o(u),a()},[n,a,o,t,i.scenes]);return s("a",{href:"#",class:Ir.inline_link,onClick:r,children:e})},Vr={regexp:/\[link=.+?\].+?\[\/link\]/ig,replacer:(e,t)=>{const n=e.match(/\[link=(.+?)\](.+?)\[\/link\]/i);return s(Dr,{choice:n[1],children:t(n[2])})}},Fr=({options:e,src:t})=>{const{getAssetPath:n}=S(),o={fullsize:!0};return["leftmargin","rightmargin","width"].forEach(a=>{e[a]&&(o[a]=e[a])}),s(xt,{src:n(t),options:o})},Hr={regexp:/\[picture(?:\s+[^\]]+)?\].*?\[\/picture\]/ig,replacer:e=>{const t=e.match(/\[picture(.*?)\](.*?)\[\/picture\]/i),n=N(t[1]);return s(Fr,{options:n,src:t[2]})}},Rr="_progress_frame_17ofj_1",Nr="_progress_bar_17ofj_7",Br="_standard_17ofj_14",zr="_accent_17ofj_18",Gr="_progress_content_17ofj_22",ve={progress_frame:Rr,progress_bar:Nr,standard:Br,accent:zr,progress_content:Gr},Ur=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,a=+e.value||0;let i=a?(a-n)*100/(o-n):0;i>100&&(i=100),i<0&&(i=0);const r=[ve.progress_bar,e.style==="accent"?ve.accent:ve.standard].join(" ");return s("div",{class:ve.progress_frame,children:[s("div",{class:r,style:{width:`${i}%`}}),s("div",{class:ve.progress_content,children:[t," "]})]})},Wr={regexp:/\[progress(?:\s+[^\]]+)?\].*?\[\/progress\]/ig,replacer:(e,t)=>{const n=e.match(/\[progress(.+?)\](.*?)\[\/progress\]/i),o=N(n[1]);return s(Ur,{options:o,children:t(n[2])})}},Kr="_hidden_1ydvn_1",qr="_revealed_1ydvn_12",nn={hidden:Kr,revealed:qr},Yr=[nn.hidden,nn.revealed],Xr=({children:e})=>{const[t,n]=w(0);return s("span",{class:Yr[t],onClick:()=>n(1-t),children:s("span",{children:e})})},Jr={regexp:/\[spoiler\].*?\[\/spoiler\]/ig,replacer:(e,t)=>{const n=e.match(/\[spoiler\](.*?)\[\/spoiler\]/i);return s(Xr,{children:t(n[1])})}},Qr=(e,t)=>e.split(/\[ \]/).map(n=>({style:{textAlign:"left"},name:t(n)})),Zr=(e,t)=>e.match(/\[row\](.+?)\[\/row\]/i)[1].split(/\[ \]/).map(t),ec={regexp:/\[table(?:\s+[^\]]+)?\].+?\[\/table\]/ig,replacer:(e,t)=>{const n=e.match(/\[table(.*?)\](.+?)\[\/table\]/i);let o={};n[1]&&(o=N(n[1]));const a=n[2].match(/\[header\](.+?)\[\/header\]/i),i=n[2].match(/\[row\].+?\[\/row\]/ig),r=a?Qr(a[1],t):[],c=i?i.map(u=>Zr(u,t)):[],d=o.columns?o.columns.split(/\s+/g):[];return s(me,{columns:r,data:c,border:o.border,padding:o.padding,columnWidth:d})}},tc={regexp:/\[url=.+?\].+?\[\/url\]/ig,replacer:(e,t)=>{const n=e.match(/\[url=(.+?)\](.+?)\[\/url\]/i);return s("a",{href:n[1],target:"_blank",rel:"noreferrer",children:t(n[2])})}},nc=({src:e,options:t})=>{const{getAssetPath:n}=S();return s("video",{style:{"pointer-events":"none"},width:"100%",autoplay:!0,disablePictureInPicture:!0,loop:!0,...t,children:s("source",{src:n(e)})})},oc={regexp:/\[video(?:\s+[^\]]+)?\].+?\[\/video\]/ig,replacer:e=>{const t=e.match(/\[video(.*?)\](.+?)\[\/video\]/i);let n={};return t[1]&&(n=N(t[1])),s(nc,{options:n,src:t[2]})}},sc=[dr,_r,mr,pr,vr,br,Cr,Ar,jr,Vr,Hr,Wr,Jr,ec,tc,oc],ac=({index:e,item:t})=>s("span",{dangerouslySetInnerHTML:{__html:t}},e),ic=e=>/<\/?[a-z][\s\S]*>/i.test(e);function rc(e,t,n){if(typeof e!="string")return e;const o=e.match(t);return o?e.split(t).flatMap((r,c)=>c<o.length?[r,n(o[c],ro)]:[r]):e}function ro(e){let t=[e];const n=[];return sc.forEach(o=>{const a=e.match(o.regexp);a&&a.forEach(i=>n.push({component:o,size:i.length}))}),n.sort((o,a)=>a.size-o.size).forEach(({component:o})=>{t=t.flatMap(a=>rc(a,o.regexp,o.replacer))}),t.map((o,a)=>typeof o=="string"&&ic(o)?ac({index:a,item:o}):o)}const Ae=({content:e,isActive:t=!0})=>{const n=ft(()=>ro(e),[e]);return s(Pn.Provider,{value:t,children:n})},cc=()=>{const e=I(),t=A([le]),n=t[le]!==Fn?t[le]:e.translate("default.title");return s("div",{class:[ir.toolbar,"atrament-toolbar"].join(" "),children:s(Ae,{content:n})})},lc="_container_text_a6tl2_1",uc={container_text:lc},Ct=({children:e})=>s("div",{class:[uc.container_text,"atrament-text-container"].join(" "),children:e}),dc="_container_scenes_13lih_1",_c={container_scenes:dc},fc=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",hc=({children:e,align:t})=>s("div",{class:[_c.container_scenes,"atrament-container-scene"].join(" "),style:{"justify-content":fc(t)},children:e}),gc="_container_choices_41rpm_1",mc={container_choices:gc},pc=({children:e,key:t,isReady:n})=>s("div",{class:[mc.container_choices,"atrament-container-choices",n?"animation_appear":""].join(" "),children:s("div",{style:{opacity:n?1:0},children:s(K,{children:e})})},t),vc="_scene_1or5e_1",bc={scene:vc},co=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function yc(e,t){this.scrollLeft=e,this.scrollTop=t}const lo=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,uo=(e,t,n)=>lo(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),on=(e,t,n)=>{var o;const a=`__SEAMLESS.BACKUP$${t}`;return!e[a]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[a]=e[t]),e[a]||n},kc=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},$t=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function wc(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const Sc=e=>.5*(1-Math.cos(Math.PI*e));function Et(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),Et=t,t()}const xc=500,_o=e=>{const n=(Et()-e.timeStamp)/(e.duration||xc);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||Sc)(n),a=e.startX+(e.targetX-e.startX)*o,i=e.startY+(e.targetY-e.startY)*o;e.method(a,i),e.rafId=window.requestAnimationFrame(()=>{_o(e)})},Fe=e=>isFinite(e)?Number(e):0,Cc=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},$c=(e,t,n)=>{var o,a;if(!Cc(e))return;const i=e.scrollLeft,r=e.scrollTop,c=Fe((o=t.left)!==null&&o!==void 0?o:i),d=Fe((a=t.top)!==null&&a!==void 0?a:r);if(c===i&&d===r)return;const u=on(HTMLElement.prototype,"scroll",yc),_=on(Object.getPrototypeOf(e),"scroll",u).bind(e);if(t.behavior!=="smooth"){_(c,d);return}const l=()=>{window.removeEventListener("wheel",f),window.removeEventListener("touchmove",f)},g=()=>{l();const m=e.nodeType===9;e.dispatchEvent(wc(m))},h=Object.assign(Object.assign({},n),{timeStamp:Et(),startX:i,startY:r,targetX:c,targetY:d,rafId:0,method:_,callback:g}),f=()=>{window.cancelAnimationFrame(h.rafId),l()};window.addEventListener("wheel",f,{passive:!0,once:!0}),window.addEventListener("touchmove",f,{passive:!0,once:!0}),_o(h)},Ec=e=>e.window===e,Lc=e=>(t,n,o)=>{const[a,i]=Ec(t)?[$t(t.document.documentElement),"Window"]:[t,"Element"],r=n??{};if(!kc(r))throw new TypeError(lo(e,i));if(!co(r.behavior))throw new TypeError(uo(e,i,r.behavior));e==="scrollBy"&&(r.left=Fe(r.left)+a.scrollLeft,r.top=Fe(r.top)+a.scrollTop),$c(a,r,o)},Ac=Lc("scroll"),Tc=Ac,fo=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},ho=(e,t,n,o)=>{let a=0;switch(t||(a^=2),e){case 0:a=a>>1|(a&1)<<1,[n,o]=[o,n];break;case 1:case 3:a^=1;break;case 4:a^=2;break}return[a,n,o]},Pc=e=>(ho(fo(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,Oc=(e,t,n)=>{const[o,a,i]=ho(t,n,e.block||"start",e.inline||"nearest");return[a,i].map((r,c)=>{switch(r){case"center":return 1;case"nearest":return 0;default:{const d=o>>c&1;return r==="start"==!d?2:3}}})},sn=(e,t,n,o,a,i,r)=>e!==0?e:a<t&&i>n||a>t&&i<n?null:a<=t&&r<=o||i>=n&&r>=o?2:i>n&&r<o||a<t&&r>o?3:null,an=e=>e!=="visible"&&e!=="clip",jc=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},Mc=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?an(t.overflowY)||an(t.overflowX)||e===$t(e):!1,rn=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return jc(e)}return n},Xe=(e,t,n)=>e<t?t:e>n?n:e,Ic=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],Dc=(e,t,n)=>{const{top:o,right:a,bottom:i,left:r}=t,c=Ic(e.ownerDocument);if(!c)return[o,a,i,r];const d=u=>{const _=n.getPropertyValue(`${c}-${u}`);return parseInt(_,10)||0};return[o-d("top"),a+d("right"),i+d("bottom"),r-d("left")]},je=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},Vc=(e,t)=>{var n,o,a;const i=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[r,c,d,u]=e===$t(e)?[0,0,(o=i==null?void 0:i.width)!==null&&o!==void 0?o:e.clientWidth,(a=i==null?void 0:i.height)!==null&&a!==void 0?a:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],_=r+e.clientLeft,l=c+e.clientTop,g=_+d,h=l+u;return[l,g,h,_]},Fc=(e,t)=>{const n=[];let o=e.ownerDocument,a=o.defaultView;if(!a)return n;const i=window.getComputedStyle(e),r=i.direction!=="rtl",c=fo(i.writingMode||i.getPropertyValue("-webkit-writing-mode")||i.getPropertyValue("-ms-writing-mode")),[d,u]=Oc(t,c,r);let[_,l,g,h]=Dc(e,e.getBoundingClientRect(),i);for(let f=rn(e);f!==null;f=rn(f)){if(o!==f.ownerDocument){if(o=f.ownerDocument,a=o.defaultView,!a)break;const{left:D,top:q}=f.getBoundingClientRect();_+=q,l+=D,g+=q,h+=D}const m=a.getComputedStyle(f);if(m.position==="fixed")break;if(!Mc(f,m))continue;const b=f.getBoundingClientRect(),[v,x,y,k]=Vc(f,b),M=sn(d,k,x,f.clientWidth,h,l,l-h),O=sn(u,v,y,f.clientHeight,_,g,g-_),B=M===null?0:je(M,h,l)-je(M,k,x),se=O===null?0:je(O,_,g)-je(O,v,y),W=Pc(m)?Xe(B,-f.scrollWidth+f.clientWidth-f.scrollLeft,-f.scrollLeft):Xe(B,-f.scrollLeft,f.scrollWidth-f.clientWidth-f.scrollLeft),Q=Xe(se,-f.scrollTop,f.scrollHeight-f.clientHeight-f.scrollTop);n.push([f,{left:f.scrollLeft+W,top:f.scrollTop+Q,behavior:t.behavior}]),_=Math.max(_-Q,v),l=Math.min(l-W,x),g=Math.min(g-Q,y),h=Math.max(h-W,k)}return n},Hc=(e,t,n)=>{const o=t||{};if(!co(o.behavior))throw new TypeError(uo("scrollIntoView","Element",o.behavior));Fc(e,o).forEach(([i,r])=>{Tc(i,r,n)})},Rc="_paragraph_gh666_1",Nc={paragraph:Rc},Bc=({content:e,isCurrent:t})=>{if(e.text===`
`)return s($,{});let n;t||(n={opacity:"70%"});let o=e.tags.CLASS||"";return Array.isArray(o)&&(o=o.join(" ")),s("div",{style:n,class:`${Nc.paragraph} ${o}`,children:s(Ae,{content:e.text,isActive:t})})};function zc(e,t){const n=[];for(let o of t)n.push(new Promise(a=>{const i=new Image;i.onload=a,i.onerror=a,i.src=e(o)}));return Promise.allSettled(n)}const Gc=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:a}=S(),[i,r]=w(!1),c=$o(null),d=p(u=>{o(!0),setTimeout(()=>{Hc(c.current,{behavior:u,block:"start"},{duration:300})},100)},[o]);return P(()=>{i&&t&&d(n?"instant":"smooth")},[i,t,n,d]),P(()=>{(async()=>{await zc(a,e.images),r(!0)})()},[e,r,a]),s("div",{class:[bc.scene,"atrament-scene",t&&i?"animation_appear":""].join(" "),ref:c,children:s("div",{style:{opacity:i?1:0},children:e.content.map((u,_)=>s($,{children:[u.images.map((l,g)=>s(xt,{src:a(l)},`${g}-${l}`)),s(Bc,{isCurrent:t,content:u})]},`paragraph-${e.uuid}-${_}`))})})},Uc="_choice_button_1j6o7_1",Wc="_choice_active_1j6o7_25",Kc="_choice_inactive_1j6o7_49",qc="_buttons_separate_1j6o7_71",Yc="_buttons_grouped_1j6o7_78",Xc="_left_aligned_1j6o7_100",Jc="_right_aligned_1j6o7_104",ee={choice_button:Uc,choice_active:Wc,choice_inactive:Kc,buttons_separate:qc,buttons_grouped:Yc,left_aligned:Xc,right_aligned:Jc},Qc=({choice:e,chosen:t,handleClick:n})=>{var g,h,f,m;const{metadata:o}=A(["metadata"]),a=t!==null,i=t===e.id,r=()=>{a||n(e.id)},c=a?i?ee.choice_active:ee.choice_inactive:"",d=(g=o.choices)!=null&&g.includes("grouped")?ee.buttons_grouped:ee.buttons_separate,u=(h=o.choices)!=null&&h.includes("left")?ee.left_aligned:(f=o.choices)!=null&&f.includes("right")?ee.right_aligned:"";let _=e.tags.CLASS;Array.isArray(_)&&(_=_.join(" "));const l=[ee.choice_button,d,u,c,_];return s("button",{class:l.join(" "),onClick:r,disabled:e.disabled,children:[(m=o.choices)!=null&&m.includes("numbered")?s($,{children:[e.id+1,". "]}):"",s(Ae,{content:e.choice})]})},Zc=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:a}=S(),[i,r]=w(null),c=t&&t.choices?t.choices.length:-1,d=p(_=>{const l=c>1?350:150;r(_),setTimeout(()=>{setTimeout(()=>{r(null),n(!1),o(_),a()},l)},0)},[o,a,n,c]),u=p(_=>{const l=+_.key;_.target.tagName.toLowerCase()!=="input"&&c>0&&l>0&&l<=c&&!t.choices[l-1].disabled&&d(t.choices[l-1].id)},[c,d,t.choices]);return P(()=>(document.addEventListener("keydown",u,!1),()=>{document.removeEventListener("keydown",u,!1)}),[u]),s($,{children:t.choices.map((_,l)=>s(Qc,{choice:_,chosen:i,handleClick:d},`${e}-${l}`))})},el="_container_1pyc1_10",tl="_circle_1pyc1_18",nl="_circle_empty_1pyc1_53",Je={container:el,circle:tl,circle_empty:nl},cn=()=>document.getElementsByClassName("atrament-container-scene")[0],ln=()=>document.getElementsByClassName("atrament-container-choices")[0],un=({setReady:e,withChoice:t=!1,delay:n=0,animation:o=0,clickable:a=0})=>{const{makeChoice:i,continueStory:r}=S(),[c,d]=w(!1),u=I(),_=p(()=>{setTimeout(()=>{e(!1),t&&i(0),r()},0)},[i,r,e,t]),l=p(m=>{(m.key===" "||m.key==="Enter")&&_()},[_]),g=p(()=>(document.addEventListener("keydown",l,!1),cn().addEventListener("click",_,!1),ln().addEventListener("click",_,!1),0),[_,l]),h=p(()=>(document.removeEventListener("keydown",l,!1),cn().removeEventListener("click",_,!1),ln().removeEventListener("click",_,!1),0),[_,l]);P(()=>{const m=setTimeout(g,a*1e3),b=setTimeout(()=>d(!0),o*1e3),v=n?setTimeout(_,n*1e3):void 0;return()=>{clearTimeout(b),clearTimeout(m),clearTimeout(v),h()}},[g,h,_,d,a,n,o]);const f=[Je.circle];return n&&f.push(Je.circle_empty),s("div",{class:Je.container,children:c?s("div",{class:f.join(" "),title:u.translate("game.click-to-continue")}):""})};function ol(e){const t={delay:0,animation:0,clickable:0};if(e.startsWith("(")){const n=N(e.replace(/[()]/g,""));Object.entries(n).forEach(([o,a])=>t[o]=a),t.continue&&(t.delay=t.continue)}else e?t.delay=e:t.animation=3;return t}const sl=()=>{const{atrament:e}=S();return s(yt,{onClick:async()=>{await e.game.removeSave(),X("/")},children:s(C,{id:"game.end"})})},al=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const a=t&&t.choices?t.choices.length:-1;if(a===1){const i=t.choices[0].choice.match(/^(|>>>(\d*|\(.+?\)))$/);if(i){const r=ol(i[2]);return s(un,{setReady:n,withChoice:!0,delay:r.delay,animation:r.animation,clickable:r.clickable})}}else if(a===0)return t.canContinue?s(un,{setReady:n,animation:3}):s(sl,{});return o?s($,{}):s(Zc,{currentScene:t,setReady:n},e)},il=()=>{var r;const e=A(["scenes","metadata"]),[t,n]=w(!1),o=e.scenes.length-1,a=!!e.metadata.hypertext,i=`choices-${(r=e.scenes[o])==null?void 0:r.uuid}`;return s(Ct,{children:[s(hc,{align:e.metadata.scenes_align,children:e.scenes.map((c,d)=>s(Gc,{scene:c,isCurrent:d===o,isSingle:o===0,readyHandler:n},c.uuid))}),s(pc,{isReady:t,children:s(al,{currentScene:e.scenes[o],setReady:n,isHypertextMode:a},i)},i)]})},rl="_overlay_container_1lt26_1",cl="_overlay_header_1lt26_11",ll="_overlay_title_1lt26_24",ul="_overlay_content_1lt26_33",dl="_button_back_1lt26_48",be={overlay_container:rl,overlay_header:cl,overlay_title:ll,overlay_content:ul,button_back:dl},_l="_text_paragraph_1j0l5_1",fl={text_paragraph:_l},hl=({children:e})=>s("div",{class:[fl.text_paragraph,"atrament-text-paragraph"].join(" "),children:e}),gl=()=>{const{overlay:e,closeOverlay:t}=Qn();return e.current?s("div",{class:be.overlay_container,children:[s("div",{class:be.overlay_header,children:[s("button",{class:be.button_back,onClick:t,children:s(_a,{})}),e.title&&s("div",{class:be.overlay_title,children:e.title})]}),s("div",{class:[be.overlay_content,"atrament-overlay"].join(" "),children:s(Ct,{children:e.content.map((n,o)=>s(hl,{children:s(Ae,{content:n})},o))})})]}):s($,{})},ml=()=>{const{atrament:e}=S(),t=A([ie]),n=p(()=>e.state.setKey(ie,null),[e]),o=p(a=>{a.key==="Escape"&&n()},[n]);if(P(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),t[ie])return s(qn,{close:n,message:t[ie]})},pl=()=>{const{getAssetPath:e}=S(),t=A(["game"]);let n;t.game.background&&(n={"background-image":`url(${e(t.game.background)})`,"background-size":"cover","background-position":"center"});const o=t.game.background_page;return P(()=>{io(o,e)},[o,e]),s(Le,{style:n,children:[s(wt,{}),s(ml,{}),s(cc,{}),s(gl,{}),s(il,{})]})},vl=()=>{const{evaluateInkFunction:e}=S(),{metadata:t}=A(["metadata"]),[n,o]=w(" "),a=()=>X("/");return P(()=>{const i=e(t.about);i.output?o(i.output):o(i.error)},[t.about,o,e]),s(Le,{children:[s(wt,{isHomeScreen:!0}),s(Ct,{children:[s(vt,{children:[s(K,{children:" "}),s(K,{children:s(Ae,{content:n})})]}),s(K,{children:s(F,{onClick:a,children:s(C,{id:"main.menu"})},"mainmenu")})]})]})};function bl(){const{atrament:e}=S(),t=p(n=>{n.url==="/"&&n.previous&&e.game.clear()},[e.game]);return s(Jn,{history:ea(),onChange:t,children:[s(sr,{path:"/"}),s(pl,{path:"/game"}),s(vl,{path:"/about"})]})}function yl(){const[e,t]=w(null),[n,o]=w(null);return P(()=>{(async()=>{const{default:i}=await nt(async()=>{const{default:c}=await import("./index-BoYKo3EW.js");return{default:c}},[],import.meta.url),{Story:r}=await nt(async()=>{const{Story:c}=await import("./ink-BsIvpYiK.js");return{Story:c}},[],import.meta.url);try{await cs(i,r),t(i)}catch(c){console.error(c),o(c.message)}})()},[]),s(Mo,{language:No,locales:ls,children:s(gt.Provider,{value:e,children:s(_s,{children:e?s(bl,{}):n?s(Le,{children:s(qn,{message:n})}):s(zs,{})})})})}async function dn(){const t=window.screenX<-1e4||window.screenX>window.screen.availWidth+1e4,n=window.screenY<-1e4||window.screenY>window.screen.availHeight+1e4;(t||n)&&(console.warn("fixing unmaximize bug",window.screenX,window.screenY),await window.Neutralino.window.center())}window.Neutralino&&(addEventListener("resize",dn),addEventListener("DOMContentLoaded",dn));yo(s(yl,{}),document.getElementById("app"));export{nt as _};
